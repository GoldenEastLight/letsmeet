<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.anjanda.letsmeet.repository.mapper.MeetingRoomMapper">

<!-- resultMap 사용 방법 -->


<!-- C :: 회원 가입 -->
	<insert id="insertMeetingRoom" parameterType="meetingRoom">
	INSERT INTO `letsmeet`.`user`
		(`u_no`, `u_email`, `u_password`, `u_name`, `u_join_date`)
	VALUES
		(#{uNo}, #{uEmail}, #{uPassword}, #{uName}, now());
	</insert>

<!-- R :: 사용자의 약속방 전체 조회 -->
	<select id="selectMeetingRoom" parameterType="meetingRoom" resultType="meetingRoom">
		select *
		  from meetingroom inner join meetingroomuser
		    on meetingroom.mr_no = meetingroomuser.mru_mr_no
		 where meetingroomuser.mru_u_no = #{uNo}
	</select>
	
<!-- R :: 약속방 상세 조회 -->
	<select id="selectMeetingRoomByMrNo" parameterType="int" resultType="meetingRoom">
		select *
		  from meetingroom
		 where mr_no=#{mrNo}
	</select>	

<!-- U :: 약속방 정보 수정 (방이름, 카데고리, 시작기간, 끝기간) -->
	<update id="updateMeetingRoom" parameterType="meetingRoom">
		update meetingroom
		   set mr_name=#{mrName}, mr_category=#{mrCategory}, mr_date_start=#{mrDateStart}, mr_date_end=#{mrDateEnd}
		 where mr_no = #{mrNo}
	</update>

<!-- D :: 약속방 삭제 -->
	<delete id="deleteMeetingRoom" parameterType="int">
		delete 
		  from meetingroom 
		 where mr_no=#{mrNo}
	</delete>

<!-- CRUD 외 추가 기능 -->



</mapper>
	